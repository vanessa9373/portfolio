{
  "description": "Stop EC2 instances in a single AZ to test failover",
  "targets": {
    "ec2-instances": {
      "resourceType": "aws:ec2:instance",
      "resourceTags": {
        "Environment": "production",
        "ChaosReady": "true"
      },
      "filters": [
        {
          "path": "Placement.AvailabilityZone",
          "values": ["us-west-2a"]
        }
      ],
      "selectionMode": "ALL"
    }
  },
  "actions": {
    "stop-instances": {
      "actionId": "aws:ec2:stop-instances",
      "parameters": {
        "startInstancesAfterDuration": "PT5M"
      },
      "targets": {
        "Instances": "ec2-instances"
      }
    }
  },
  "stopConditions": [
    {
      "source": "aws:cloudwatch:alarm",
      "value": "arn:aws:cloudwatch:us-west-2:ACCOUNT_ID:alarm:chaos-safety-stop"
    }
  ],
  "roleArn": "arn:aws:iam::ACCOUNT_ID:role/FISExperimentRole",
  "tags": {
    "Project": "chaos-engineering",
    "Owner": "jenella-v"
  }
}
